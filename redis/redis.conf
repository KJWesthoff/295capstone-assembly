# Secure Redis Configuration

# Network security
bind 127.0.0.1 ::1
protected-mode yes
port 6379

# Authentication (uncomment and set strong password in production)
# requirepass your_strong_password_here

# Memory and performance
maxmemory 256mb
maxmemory-policy allkeys-lru

# Persistence settings
save 900 1
save 300 10
save 60 10000

# Security settings
rename-command FLUSHDB ""
rename-command FLUSHALL ""
rename-command DEBUG ""
rename-command CONFIG "CONFIG_b3d8f2a9c1e7"
rename-command SHUTDOWN "SHUTDOWN_a4c2e6b8f9d1"
rename-command EVAL ""

# Disable dangerous commands
rename-command SCRIPT ""

# Logging
loglevel notice
logfile /data/redis.log

# Slow log
slowlog-log-slower-than 10000
slowlog-max-len 128

# Connection limits
maxclients 100
timeout 300

# Disable TCP keepalive
tcp-keepalive 60

# Append only file
appendonly yes
appendfsync everysec
no-appendfsync-on-rewrite no
auto-aof-rewrite-percentage 100
auto-aof-rewrite-min-size 64mb